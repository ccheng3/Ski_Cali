{"ast":null,"code":"import _slicedToArray from\"/home/chris/Documents/Web_Dev_Workshop/Ski-California/liftie-resorts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useParams}from'react-router-dom';import{CircularProgress,Container}from'@mui/material';import ResortDetail from'../ResortDetail/ResortDetail';import NotFoundPage from'../NotFoundPage/NotFoundPage';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Resort(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isDataLoaded=_React$useState2[0],setIsDataLoaded=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),isValidResortName=_React$useState4[0],setIsValidResortName=_React$useState4[1];var _useParams=useParams(),resortQuery=_useParams.resortQuery;var skimapID='';var _React$useState5=React.useState({}),_React$useState6=_slicedToArray(_React$useState5,2),resortData=_React$useState6[0],setResortData=_React$useState6[1];var corsProxy='https://mighty-scrubland-75189.herokuapp.com';React.useEffect(function(){//  error check for a valid resort query name first\n// don't call fetch() on an invalid resortQuery\nvar validResort=props.resorts.find(function(resort){return resort.query===resortQuery;});if(validResort===undefined){setIsValidResortName(false);return;}skimapID=props.resorts.find(function(resort){return resort.query===resortQuery;}).skimapID;fetch(\"\".concat(corsProxy,\"/https://liftie.info/api/resort/\").concat(resortQuery)).then(function(response){return response.json();}).then(function(data){setResortData(data);setTimeout(function(){return setIsDataLoaded(true);},1000);}).catch(function(error){console.log(\"Encountered error in Liftie Fetch request: \".concat(error));});},[resortQuery]);// only display the resort content AFTER the fetch call has returned!\n// Otherwise, display the 404 page if invalid resort name was used.\nvar displayContent;if(isValidResortName&&!isDataLoaded){displayContent=/*#__PURE__*/_jsx(Container,{style:{display:'flex',justifyContent:'center',alignItems:'center',margin:'4.8rem'},children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})});}if(!isValidResortName){displayContent=/*#__PURE__*/_jsx(NotFoundPage,{});}if(isDataLoaded){displayContent=/*#__PURE__*/_jsx(ResortDetail,{resortData:resortData,skimapID:skimapID});}return displayContent;}","map":{"version":3,"names":["React","useParams","CircularProgress","Container","ResortDetail","NotFoundPage","Resort","props","useState","isDataLoaded","setIsDataLoaded","isValidResortName","setIsValidResortName","resortQuery","skimapID","resortData","setResortData","corsProxy","useEffect","validResort","resorts","find","resort","query","undefined","fetch","then","response","json","data","setTimeout","catch","error","console","log","displayContent","display","justifyContent","alignItems","margin"],"sources":["/home/chris/Documents/Web_Dev_Workshop/Ski-California/liftie-resorts/src/components/Resort/Resort.jsx"],"sourcesContent":["import React from 'react';\n\nimport { useParams } from 'react-router-dom';\nimport { CircularProgress, Container } from '@mui/material';\n\nimport ResortDetail from '../ResortDetail/ResortDetail';\nimport NotFoundPage from '../NotFoundPage/NotFoundPage';\n\nexport default function Resort(props) {\n   const [isDataLoaded, setIsDataLoaded] = React.useState(false);\n   const [isValidResortName, setIsValidResortName] = React.useState(true);\n   const { resortQuery } = useParams();\n   let skimapID = '';\n\n   let [resortData, setResortData] = React.useState({});\n   const corsProxy = 'https://mighty-scrubland-75189.herokuapp.com';\n\n   React.useEffect(() => {\n      //  error check for a valid resort query name first\n      // don't call fetch() on an invalid resortQuery\n      const validResort = props.resorts.find(resort => resort.query === resortQuery);\n      if (validResort === undefined) {\n         setIsValidResortName(false);\n         return;\n      }\n\n      skimapID = props.resorts.find(resort => resort.query === resortQuery).skimapID;\n      fetch(`${corsProxy}/https://liftie.info/api/resort/${resortQuery}`)\n         .then(response => response.json())\n         .then(data => {\n            setResortData(data);\n            setTimeout(() => setIsDataLoaded(true), 1000);\n         })\n         .catch((error) => {\n            console.log(`Encountered error in Liftie Fetch request: ${error}`)\n         });\n   }, [resortQuery])\n\n   // only display the resort content AFTER the fetch call has returned!\n   // Otherwise, display the 404 page if invalid resort name was used.\n   let displayContent;\n   if (isValidResortName && !isDataLoaded) {\n      displayContent = <Container style={{\n         display: 'flex',\n         justifyContent: 'center',\n         alignItems: 'center',\n         margin: '4.8rem'\n      }}>\n         <CircularProgress color='inherit' />\n      </Container>\n   }\n   if (!isValidResortName) {\n      displayContent = <NotFoundPage />;\n   }\n   if (isDataLoaded) {\n      displayContent = <ResortDetail resortData={resortData}\n         skimapID={skimapID}\n      />;\n   }\n\n   return (\n      displayContent\n   );\n}"],"mappings":"0JAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,gBAAT,CAA2BC,SAA3B,KAA4C,eAA5C,CAEA,MAAOC,aAAP,KAAyB,8BAAzB,CACA,MAAOC,aAAP,KAAyB,8BAAzB,C,2CAEA,cAAe,SAASC,OAAT,CAAgBC,KAAhB,CAAuB,CACnC,oBAAwCP,KAAK,CAACQ,QAAN,CAAe,KAAf,CAAxC,oDAAOC,YAAP,qBAAqBC,eAArB,qBACA,qBAAkDV,KAAK,CAACQ,QAAN,CAAe,IAAf,CAAlD,qDAAOG,iBAAP,qBAA0BC,oBAA1B,qBACA,eAAwBX,SAAS,EAAjC,CAAQY,WAAR,YAAQA,WAAR,CACA,GAAIC,SAAQ,CAAG,EAAf,CAEA,qBAAkCd,KAAK,CAACQ,QAAN,CAAe,EAAf,CAAlC,qDAAKO,UAAL,qBAAiBC,aAAjB,qBACA,GAAMC,UAAS,CAAG,8CAAlB,CAEAjB,KAAK,CAACkB,SAAN,CAAgB,UAAM,CACnB;AACA;AACA,GAAMC,YAAW,CAAGZ,KAAK,CAACa,OAAN,CAAcC,IAAd,CAAmB,SAAAC,MAAM,QAAIA,OAAM,CAACC,KAAP,GAAiBV,WAArB,EAAzB,CAApB,CACA,GAAIM,WAAW,GAAKK,SAApB,CAA+B,CAC5BZ,oBAAoB,CAAC,KAAD,CAApB,CACA,OACF,CAEDE,QAAQ,CAAGP,KAAK,CAACa,OAAN,CAAcC,IAAd,CAAmB,SAAAC,MAAM,QAAIA,OAAM,CAACC,KAAP,GAAiBV,WAArB,EAAzB,EAA2DC,QAAtE,CACAW,KAAK,WAAIR,SAAJ,4CAAgDJ,WAAhD,EAAL,CACIa,IADJ,CACS,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EADjB,EAEIF,IAFJ,CAES,SAAAG,IAAI,CAAI,CACXb,aAAa,CAACa,IAAD,CAAb,CACAC,UAAU,CAAC,iBAAMpB,gBAAe,CAAC,IAAD,CAArB,EAAD,CAA8B,IAA9B,CAAV,CACF,CALJ,EAMIqB,KANJ,CAMU,SAACC,KAAD,CAAW,CACfC,OAAO,CAACC,GAAR,sDAA0DF,KAA1D,GACF,CARJ,EASF,CAnBD,CAmBG,CAACnB,WAAD,CAnBH,EAqBA;AACA;AACA,GAAIsB,eAAJ,CACA,GAAIxB,iBAAiB,EAAI,CAACF,YAA1B,CAAwC,CACrC0B,cAAc,cAAG,KAAC,SAAD,EAAW,KAAK,CAAE,CAChCC,OAAO,CAAE,MADuB,CAEhCC,cAAc,CAAE,QAFgB,CAGhCC,UAAU,CAAE,QAHoB,CAIhCC,MAAM,CAAE,QAJwB,CAAlB,uBAMd,KAAC,gBAAD,EAAkB,KAAK,CAAC,SAAxB,EANc,EAAjB,CAQF,CACD,GAAI,CAAC5B,iBAAL,CAAwB,CACrBwB,cAAc,cAAG,KAAC,YAAD,IAAjB,CACF,CACD,GAAI1B,YAAJ,CAAkB,CACf0B,cAAc,cAAG,KAAC,YAAD,EAAc,UAAU,CAAEpB,UAA1B,CACd,QAAQ,CAAED,QADI,EAAjB,CAGF,CAED,MACGqB,eADH,CAGF"},"metadata":{},"sourceType":"module"}